(function(e){function t(t){for(var o,s,r=t[0],i=t[1],l=t[2],b=0,u=[];b<r.length;b++)s=r[b],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&u.push(a[s][0]),a[s]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);d&&d(t);while(u.length)u.shift()();return n.push.apply(n,l||[]),c()}function c(){for(var e,t=0;t<n.length;t++){for(var c=n[t],o=!0,r=1;r<c.length;r++){var i=c[r];0!==a[i]&&(o=!1)}o&&(n.splice(t--,1),e=s(s.s=c[0]))}return e}var o={},a={app:0},n=[];function s(t){if(o[t])return o[t].exports;var c=o[t]={i:t,l:!1,exports:{}};return e[t].call(c.exports,c,c.exports,s),c.l=!0,c.exports}s.m=e,s.c=o,s.d=function(e,t,c){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(s.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(c,o,function(t){return e[t]}.bind(null,o));return c},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/inge-qr-maker-front/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],i=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=i;n.push([0,"chunk-vendors"]),c()})({0:function(e,t,c){e.exports=c("56d7")},2810:function(e,t,c){},"41ad":function(e,t,c){},"540e":function(e,t,c){},"56d7":function(e,t,c){"use strict";c.r(t);var o=c("7a23");const a={id:"app"},n={key:0},s={key:1};function r(e,t,c,r,i,l){const d=Object(o["q"])("CodeCreate"),b=Object(o["q"])("CodesTable"),u=Object(o["q"])("Authenticator");return Object(o["k"])(),Object(o["e"])("div",a,[r.isAuthenticated?(Object(o["k"])(),Object(o["e"])("div",n,[Object(o["h"])(d),Object(o["h"])(b)])):(Object(o["k"])(),Object(o["e"])("div",s,[Object(o["h"])(u,{onVerified:t[0]||(t[0]=e=>r.setAuthenticate())})]))])}const i=e=>(Object(o["m"])("data-v-06fa94c1"),e=e(),Object(o["l"])(),e),l={class:"container"},d={class:"pre-content"},b=i(()=>Object(o["f"])("h1",null,"Códigos creados",-1)),u={class:"buttons"},O={key:0},j={key:1},f={class:"content"},p={key:0},g=i(()=>Object(o["f"])("thead",null,[Object(o["f"])("tr",null,[Object(o["f"])("th",null,"Cliente"),Object(o["f"])("th",null,"Unidad"),Object(o["f"])("th",null,"Equipo")])],-1)),h={key:0},v={colspan:"6",class:"spinner-container"},k={key:1},y={key:2},m=i(()=>Object(o["f"])("tr",null,[Object(o["f"])("td",{colspan:"6",class:"no-results"},[Object(o["f"])("h3",null," Todavía no hay códigos creados ")])],-1)),w=[m],C={key:1,class:"neomorph"},_=["id","value","onClick"],T=["for"];function x(e,t,c,a,n,s){const r=Object(o["q"])("Spinner");return Object(o["k"])(),Object(o["e"])("div",l,[Object(o["f"])("div",d,[b,Object(o["f"])("div",u,[Object(o["f"])("button",{onClick:t[0]||(t[0]=e=>a.descargarTodosLosQr())},"Descargar todos los equipos"),Object(o["f"])("button",{onClick:t[1]||(t[1]=e=>a.isTable=!a.isTable)},[a.isTable?(Object(o["k"])(),Object(o["e"])("span",O,"Descargar algunos códigos")):(Object(o["k"])(),Object(o["e"])("span",j,"Volver a la tabla"))]),s.tamosEnDev?Object(o["d"])("",!0):(Object(o["k"])(),Object(o["e"])("button",{key:0,class:"button-red",onClick:t[2]||(t[2]=e=>a.borrarTodo())},"Borrar todo"))])]),Object(o["f"])("div",f,[a.isTable?(Object(o["k"])(),Object(o["e"])("table",p,[g,a.isLoading?(Object(o["k"])(),Object(o["e"])("tbody",h,[Object(o["f"])("tr",null,[Object(o["f"])("td",v,[Object(o["h"])(r)])])])):a.codigosCreados.length?(Object(o["k"])(),Object(o["e"])("tbody",k,[(Object(o["k"])(!0),Object(o["e"])(o["a"],null,Object(o["p"])(a.codigosCreados,(e,t)=>(Object(o["k"])(),Object(o["e"])("tr",{key:t},[Object(o["f"])("td",null,Object(o["r"])(e.cliente),1),Object(o["f"])("td",null,Object(o["r"])(e.unidad),1),Object(o["f"])("td",null,Object(o["r"])(e.equipo),1)]))),128))])):(Object(o["k"])(),Object(o["e"])("tbody",y,w))])):(Object(o["k"])(),Object(o["e"])("div",C,[Object(o["f"])("ul",null,[(Object(o["k"])(!0),Object(o["e"])(o["a"],null,Object(o["p"])(a.codigosCreados,(e,t)=>(Object(o["k"])(),Object(o["e"])("li",{key:t},[Object(o["f"])("input",{type:"checkbox",id:e._id,value:e.cliente,onClick:t=>a.seleccionarCodigo(e)},null,8,_),Object(o["f"])("label",{for:e._id},Object(o["r"])(e.cliente)+" - "+Object(o["r"])(e.unidad)+" - "+Object(o["r"])(e.equipo),9,T)]))),128))]),Object(o["f"])("h3",null,"Códigos seleccionados: "+Object(o["r"])(s.cantidadSeleccionada)+" / "+Object(o["r"])(s.cantidadTotalCodigos),1),Object(o["f"])("button",{class:Object(o["j"])([s.cantidadSeleccionada<1?"button-disabled":"button-green"]),onClick:t[3]||(t[3]=e=>a.descargarSeleccionados())},"Descargar",2)]))])])}var Q=c("bc3a"),S=c.n(Q);const q=S.a.create({timeout:0}),L=()=>localStorage.getItem("inge_access_token"),P=e=>(e.headers["access-token"]=L(),e);q.interceptors.request.use(P);var A=c("3d20"),R=c.n(A);const D=e=>(Object(o["m"])("data-v-54062dfb"),e=e(),Object(o["l"])(),e),E={class:"container"},I=D(()=>Object(o["f"])("div",{class:"loader"},null,-1)),U=D(()=>Object(o["f"])("span",null,"Buscando códigos creados . . .",-1)),B=[I,U];function N(e,t){return Object(o["k"])(),Object(o["e"])("div",E,B)}c("a6f1");var V=c("6b0d"),M=c.n(V);const J={},$=M()(J,[["render",N],["__scopeId","data-v-54062dfb"]]);var z=$,K=c("69a4"),F={components:{Spinner:z},setup(){const e=Object(o["o"])([]);var t=Object(o["o"])([]);const c=Object(o["i"])("apiUrl"),a=Object(o["o"])(!1),n=Object(o["o"])(!0),s="",r=()=>{a.value=!0;try{q.get(c+"/").then(t=>{e.value=t.data,a.value=!1}).catch((function(e){console.log(e),R.a.fire({icon:"error",title:"Oops...",text:"Puede que tu key de acceso haya caducado. Proba generando una nueva clave y recargando el sitio web."})}))}catch(t){console.log(t),R.a.fire({icon:"error",title:"Oops...",text:t}),a.value=!0}},i=e=>{R.a.fire({title:"Descargando los códigos QR . . .",didOpen:()=>{R.a.showLoading(),q.get(c+"/download/"+e,{responseType:"blob"}).then(e=>{let t=new Blob([e.data],{type:"image/png"});Object(K["download"])(t,e.headers.name),R.a.fire({icon:"success",title:"¡Listo!",text:"Código descargado!"})}).catch(e=>{R.a.fire({icon:"error",title:"Oops...",text:"No se pudo descargar el código"}),console.log(e)})},allowOutsideClick:()=>!R.a.isLoading()})},l=()=>{R.a.fire({title:"Descargando los códigos QR . . .",didOpen:()=>{R.a.showLoading(),q.get(c+"/download-all",{responseType:"blob"}).then(e=>{console.log(e);let t=new Blob([e.data],{type:e.data.type});Object(K["download"])(t,"Códigos QR"),R.a.fire({icon:"success",title:"¡Listo!",text:"Codigos QR descargados!"})}).catch(e=>{R.a.fire({icon:"error",title:"Oops...",text:"No se pudieron descargar los codigos"}),console.log(e)})},allowOutsideClick:()=>!R.a.isLoading()})},d=e=>{if(t.value.find(t=>t._id===e._id)){let c=t.value.indexOf(t=>t._id===e._id);t.value.splice(c,1)}else t.value.push(e)},b=function(){return new Promise((e,o)=>{q.post(c+"/prepare-array",t.value).then(t=>{t.data.length>0?e(t.data):o("El array vino vacio!")}).catch(e=>{console.log(e),o(e)})})},u=()=>{R.a.fire({title:"Descargando los códigos QR . . .",didOpen:()=>{R.a.showLoading(),b().then(e=>{q.post(c+"/download",e,{responseType:"blob"}).then(e=>{let t=new Blob([e.data],{type:e.data.type});Object(K["download"])(t,"Códigos QR"),R.a.fire({icon:"success",title:"¡Listo!",text:"Códigos QR descargados!"})}).catch(e=>{R.a.fire({icon:"error",title:"Oops...",text:"No se pudieron descargar los codigos"}),console.log(e)})}).catch(e=>{console.log(e)})},allowOutsideClick:()=>!R.a.isLoading()})},O=()=>{a.value=!0,q.get(c+"/delete-all").then(e=>{console.log(e),a.value=!1,r()}).catch(e=>{console.log(e),a.value=!1})};return{getQrs:r,codigosCreados:e,codigosSeleccionados:t,isLoading:a,isTable:n,descargarQr:i,descargarTodosLosQr:l,seleccionarCodigo:d,prepararSeleccionados:b,descargarSeleccionados:u,borrarTodo:O,emit:s}},computed:{cantidadSeleccionada(){return this.codigosSeleccionados.length},cantidadTotalCodigos(){return this.codigosCreados.length},tamosEnDev(){return!0}},mounted(){this.emitter.on("recargarTabla",()=>{this.getQrs()})},created(){this.getQrs()}};c("cbc9");const G=M()(F,[["render",x],["__scopeId","data-v-06fa94c1"]]);var H=G;const W=e=>(Object(o["m"])("data-v-612ce3b7"),e=e(),Object(o["l"])(),e),X={class:"container"},Y=W(()=>Object(o["f"])("h1",null,"Crea tus códigos",-1)),Z={class:"inputs"},ee={class:"step",id:"first"},te=W(()=>Object(o["f"])("div",{class:"step-title"},[Object(o["f"])("div",{class:"step-number"},"1"),Object(o["g"])(" Pegá la información ")],-1)),ce={class:"step",id:"second"},oe=W(()=>Object(o["f"])("div",{class:"step-title"},[Object(o["f"])("div",{class:"step-number"},"2"),Object(o["g"])(" Acá aparecen todos los códigos que se van a crear ")],-1)),ae={class:"selection"},ne={key:0,class:"list"},se={class:"stand-out"},re={class:"buttons"},ie={key:1,class:"empty-message"};function le(e,t,c,a,n,s){return Object(o["k"])(),Object(o["e"])("div",X,[Y,Object(o["f"])("div",Z,[Object(o["f"])("div",ee,[te,Object(o["u"])(Object(o["f"])("textarea",{name:"qrs-json",id:"qrs-json",cols:"10",rows:"14",class:"incrusted","onUpdate:modelValue":t[0]||(t[0]=e=>a.basicData=e)},"\r\n                ",512),[[o["s"],a.basicData]]),Object(o["g"])(" Cantidad de registros: "+Object(o["r"])(a.totalRegistros),1)]),Object(o["f"])("div",ce,[oe,Object(o["f"])("div",ae,[a.formatedData.length>0?(Object(o["k"])(),Object(o["e"])("div",ne,[Object(o["f"])("ul",se,[(Object(o["k"])(!0),Object(o["e"])(o["a"],null,Object(o["p"])(a.formatedData,(e,t)=>(Object(o["k"])(),Object(o["e"])("li",{key:t},[Object(o["f"])("span",null,Object(o["r"])(e.cliente)+" - "+Object(o["r"])(e.unidad)+" - "+Object(o["r"])(e.equipo),1)]))),128))]),Object(o["f"])("div",re,[Object(o["f"])("button",{type:"button",class:"button-green",onClick:t[1]||(t[1]=(...e)=>a.crearQrs&&a.crearQrs(...e))},"Crear y Descargar QRs ")])])):(Object(o["k"])(),Object(o["e"])("div",ie," No hay QRs para crear "))])])])])}var de={name:"Code Create",setup(){const e=Object(o["o"])(""),t=Object(o["b"])(()=>JSON.parse(e.value)),c=Object(o["b"])(()=>e.value?t.value.length:0),a=Object(o["b"])(()=>e.value?t.value:[]),n=Object(o["i"])("apiUrl"),s="",r=function(){R.a.fire({title:"Creando los códigos QR . . .",didOpen:()=>{R.a.showLoading(),q.post(n+"/create",a.value).then(e=>{e&&(this.emit.emit("recargarTabla"),this.downloadAll(e.data.response).then(e=>{if(e){let t=new Blob([e.data]);Object(K["download"])(t,"Códigos QR.zip"),R.a.fire({icon:"success",title:"¡Listo!",text:"Códigos QR descargados!"})}else R.a.fire({icon:"error",title:"Oops...",text:"No se pudieron descargar los codigos"})}).catch(e=>{console.log(e),R.a.fire({icon:"error",title:"Oops...",text:e})}))}).catch(e=>{console.log(e),R.a.fire({icon:"error",title:"Oops...",text:e})})},allowOutsideClick:()=>!R.a.isLoading()})},i=function(e){return new Promise((t,c)=>{e.length?q.post(n+"/download",e,{responseType:"blob"}).then(e=>{t(e)}).catch(e=>{console.log("Error: "+e),c(!1)}):c("Array de registros vacio")})};return{basicData:e,parsedData:t,totalRegistros:c,formatedData:a,crearQrs:r,emit:s,downloadAll:i}},created(){this.emit=this.emitter}};c("ce47");const be=M()(de,[["render",le],["__scopeId","data-v-612ce3b7"]]);var ue=be;const Oe=e=>(Object(o["m"])("data-v-13e3091e"),e=e(),Object(o["l"])(),e),je={class:"authenticate-container shadow"},fe=Oe(()=>Object(o["f"])("div",{class:"form-header"},[Object(o["f"])("h2",null,"Ingresa la clave que generaste")],-1)),pe={class:"form-body"},ge=Oe(()=>Object(o["f"])("label",{for:"key"},"Key",-1)),he=Oe(()=>Object(o["f"])("div",{class:"form-footer"},[Object(o["f"])("button",{class:"button-green shadow",type:"submit"},"Autenticar")],-1));function ve(e,t,c,a,n,s){return Object(o["k"])(),Object(o["e"])("div",je,[Object(o["f"])("form",{method:"POST",onSubmit:t[1]||(t[1]=Object(o["v"])((...e)=>s.autenticar&&s.autenticar(...e),["prevent"]))},[fe,Object(o["f"])("div",pe,[ge,Object(o["u"])(Object(o["f"])("input",{type:"key","onUpdate:modelValue":t[0]||(t[0]=e=>a.key=e)},null,512),[[o["s"],a.key]])]),he],32)])}var ke={setup(){const e=Object(o["o"])(""),t=Object(o["i"])("basePath");return{key:e,basePath:t}},methods:{autenticar:function(){let e=this.key.split(" ",2);S.a.post(this.basePath+"/verify",{token:this.key}).then(t=>{t.data.isValidated?(localStorage.setItem("inge_access_token",e[1]),this.$emit("verified")):R.a.fire({icon:"error",title:"Error en validación de token",text:t.data.message})}).catch(e=>{console.log(e),R.a.fire({icon:"error",title:"Error en validación de token",text:e.message})})}}};c("ae92");const ye=M()(ke,[["render",ve],["__scopeId","data-v-13e3091e"]]);var me=ye;function we(e){const{title:t}=e.$options;if(t)return"function"===typeof t?t.call(e):t}var Ce={created(){const e=we(this);e&&(document.title=e)}},_e={name:"App",mixins:[Ce],components:{CodesTable:H,CodeCreate:ue,Authenticator:me},title(){return"Ingeray QR System"},setup(){let e=Object(o["o"])(!1);const t=()=>{e.value=!0};return{isAuthenticated:e,setAuthenticate:t}}};c("df83");const Te=M()(_e,[["render",r]]);var xe=Te,Qe=c("1344"),Se=c("5502");const qe=Object(Se["a"])({state(){return{isAuthenticated:!1,access_token:null}},getters:{isAuthenticated(e){return e.isAuthenticated},accessToken(e){return e.access_token}},mutations:{setAccessToken(e,t){e.access_token=t.newToken}}});var Le=qe;const Pe=Object(o["c"])(xe);let Ae="https://inge-qr-maker.vercel.app",Re="https://inge-qr-maker.vercel.app/qr";Pe.provide("basePath",Ae),Pe.provide("apiUrl",Re),Pe.use(Le),Pe.config.globalProperties.emitter=Object(Qe["a"])(),Pe.mount("#app")},"69a4":function(e,t){function c(e,t){let c=window.URL.createObjectURL(e),o=document.createElement("a");o.href=c,o.setAttribute("download",t),document.body.appendChild(o),o.click(),o.remove()}e.exports={download:c}},"827d":function(e,t,c){},a6f1:function(e,t,c){"use strict";c("b80f")},ae92:function(e,t,c){"use strict";c("827d")},b80f:function(e,t,c){},cbc9:function(e,t,c){"use strict";c("41ad")},ce47:function(e,t,c){"use strict";c("540e")},df83:function(e,t,c){"use strict";c("2810")}});
//# sourceMappingURL=app.ef968a46.js.map