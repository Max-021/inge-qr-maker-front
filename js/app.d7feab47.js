(function(e){function t(t){for(var c,s,r=t[0],i=t[1],l=t[2],b=0,u=[];b<r.length;b++)s=r[b],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&u.push(a[s][0]),a[s]=0;for(c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c]);d&&d(t);while(u.length)u.shift()();return n.push.apply(n,l||[]),o()}function o(){for(var e,t=0;t<n.length;t++){for(var o=n[t],c=!0,r=1;r<o.length;r++){var i=o[r];0!==a[i]&&(c=!1)}c&&(n.splice(t--,1),e=s(s.s=o[0]))}return e}var c={},a={app:0},n=[];function s(t){if(c[t])return c[t].exports;var o=c[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=c,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)s.d(o,c,function(t){return e[t]}.bind(null,c));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/inge-qr-maker-front/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],i=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=i;n.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},2810:function(e,t,o){},"41ad":function(e,t,o){},"540e":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);var c=o("7a23");const a={id:"app"},n={key:0},s={key:1};function r(e,t,o,r,i,l){const d=Object(c["q"])("CodeCreate"),b=Object(c["q"])("CodesTable"),u=Object(c["q"])("Authenticator");return Object(c["k"])(),Object(c["e"])("div",a,[r.isAuthenticated?(Object(c["k"])(),Object(c["e"])("div",n,[Object(c["h"])(d),Object(c["h"])(b)])):(Object(c["k"])(),Object(c["e"])("div",s,[Object(c["h"])(u,{onVerified:t[0]||(t[0]=e=>r.setAuthenticate())})]))])}const i=e=>(Object(c["m"])("data-v-06fa94c1"),e=e(),Object(c["l"])(),e),l={class:"container"},d={class:"pre-content"},b=i(()=>Object(c["f"])("h1",null,"Códigos creados",-1)),u={class:"buttons"},O={key:0},j={key:1},f={class:"content"},p={key:0},g=i(()=>Object(c["f"])("thead",null,[Object(c["f"])("tr",null,[Object(c["f"])("th",null,"Cliente"),Object(c["f"])("th",null,"Unidad"),Object(c["f"])("th",null,"Equipo")])],-1)),h={key:0},v={colspan:"6",class:"spinner-container"},k={key:1},y={key:2},m=i(()=>Object(c["f"])("tr",null,[Object(c["f"])("td",{colspan:"6",class:"no-results"},[Object(c["f"])("h3",null," Todavía no hay códigos creados ")])],-1)),w=[m],C={key:1,class:"neomorph"},_=["id","value","onClick"],T=["for"];function x(e,t,o,a,n,s){const r=Object(c["q"])("Spinner");return Object(c["k"])(),Object(c["e"])("div",l,[Object(c["f"])("div",d,[b,Object(c["f"])("div",u,[Object(c["f"])("button",{onClick:t[0]||(t[0]=e=>a.descargarTodosLosQr())},"Descargar todos los equipos"),Object(c["f"])("button",{onClick:t[1]||(t[1]=e=>a.isTable=!a.isTable)},[a.isTable?(Object(c["k"])(),Object(c["e"])("span",O,"Descargar algunos códigos")):(Object(c["k"])(),Object(c["e"])("span",j,"Volver a la tabla"))]),s.tamosEnDev?Object(c["d"])("",!0):(Object(c["k"])(),Object(c["e"])("button",{key:0,class:"button-red",onClick:t[2]||(t[2]=e=>a.borrarTodo())},"Borrar todo"))])]),Object(c["f"])("div",f,[a.isTable?(Object(c["k"])(),Object(c["e"])("table",p,[g,a.isLoading?(Object(c["k"])(),Object(c["e"])("tbody",h,[Object(c["f"])("tr",null,[Object(c["f"])("td",v,[Object(c["h"])(r)])])])):a.codigosCreados.length?(Object(c["k"])(),Object(c["e"])("tbody",k,[(Object(c["k"])(!0),Object(c["e"])(c["a"],null,Object(c["p"])(a.codigosCreados,(e,t)=>(Object(c["k"])(),Object(c["e"])("tr",{key:t},[Object(c["f"])("td",null,Object(c["r"])(e.cliente),1),Object(c["f"])("td",null,Object(c["r"])(e.unidad),1),Object(c["f"])("td",null,Object(c["r"])(e.equipo),1)]))),128))])):(Object(c["k"])(),Object(c["e"])("tbody",y,w))])):(Object(c["k"])(),Object(c["e"])("div",C,[Object(c["f"])("ul",null,[(Object(c["k"])(!0),Object(c["e"])(c["a"],null,Object(c["p"])(a.codigosCreados,(e,t)=>(Object(c["k"])(),Object(c["e"])("li",{key:t},[Object(c["f"])("input",{type:"checkbox",id:e._id,value:e.cliente,onClick:t=>a.seleccionarCodigo(e)},null,8,_),Object(c["f"])("label",{for:e._id},Object(c["r"])(e.cliente)+" - "+Object(c["r"])(e.unidad)+" - "+Object(c["r"])(e.equipo),9,T)]))),128))]),Object(c["f"])("h3",null,"Códigos seleccionados: "+Object(c["r"])(s.cantidadSeleccionada)+" / "+Object(c["r"])(s.cantidadTotalCodigos),1),Object(c["f"])("button",{class:Object(c["j"])([s.cantidadSeleccionada<1?"button-disabled":"button-green"]),onClick:t[3]||(t[3]=e=>a.descargarSeleccionados())},"Descargar",2)]))])])}var Q=o("bc3a"),S=o.n(Q);const q=S.a.create({timeout:0}),L=()=>localStorage.getItem("inge_access_token"),P=e=>(e.headers["access-token"]=L(),e);q.interceptors.request.use(P);var A=o("3d20"),R=o.n(A);const D=e=>(Object(c["m"])("data-v-54062dfb"),e=e(),Object(c["l"])(),e),E={class:"container"},I=D(()=>Object(c["f"])("div",{class:"loader"},null,-1)),U=D(()=>Object(c["f"])("span",null,"Buscando códigos creados . . .",-1)),B=[I,U];function N(e,t){return Object(c["k"])(),Object(c["e"])("div",E,B)}o("a6f1");var V=o("6b0d"),M=o.n(V);const J={},$=M()(J,[["render",N],["__scopeId","data-v-54062dfb"]]);var z=$,K=o("69a4"),F={components:{Spinner:z},setup(){const e=Object(c["o"])([]);var t=Object(c["o"])([]);const o=Object(c["i"])("apiUrl"),a=Object(c["o"])(!1),n=Object(c["o"])(!0),s="",r=()=>{a.value=!0;try{q.get(o+"/").then(t=>{e.value=t.data,a.value=!1}).catch((function(e){console.log(e),R.a.fire({icon:"error",title:"Oops...",text:"Puede que tu key de acceso haya caducado. Proba generando una nueva clave y recargando el sitio web."})}))}catch(t){console.log(t),R.a.fire({icon:"error",title:"Oops...",text:t}),a.value=!0}},i=e=>{R.a.fire({title:"Descargando los códigos QR . . .",didOpen:()=>{R.a.showLoading(),q.get(o+"/download/"+e,{responseType:"blob"}).then(e=>{let t=new Blob([e.data],{type:"image/png"});Object(K["download"])(t,e.headers.name),R.a.fire({icon:"success",title:"¡Listo!",text:"Código descargado!"})}).catch(e=>{R.a.fire({icon:"error",title:"Oops...",text:"No se pudo descargar el código"}),console.log(e)})},allowOutsideClick:()=>!R.a.isLoading()})},l=()=>{R.a.fire({title:"Descargando los códigos QR . . .",didOpen:()=>{R.a.showLoading(),q.get(o+"/download-all",{responseType:"blob"}).then(e=>{console.log(e);let t=new Blob([e.data],{type:e.data.type});Object(K["download"])(t,"Códigos QR"),R.a.fire({icon:"success",title:"¡Listo!",text:"Codigos QR descargados!"})}).catch(e=>{R.a.fire({icon:"error",title:"Oops...",text:"No se pudieron descargar los codigos"}),console.log(e)})},allowOutsideClick:()=>!R.a.isLoading()})},d=e=>{if(t.value.find(t=>t._id===e._id)){let o=t.value.indexOf(t=>t._id===e._id);t.value.splice(o,1)}else t.value.push(e)},b=function(){return new Promise((e,c)=>{q.post(o+"/prepare-array",t.value).then(t=>{t.data.length>0?e(t.data):c("El array vino vacio!")}).catch(e=>{console.log(e),c(e)})})},u=()=>{R.a.fire({title:"Descargando los códigos QR . . .",didOpen:()=>{R.a.showLoading(),b().then(e=>{q.post(o+"/download",e,{responseType:"blob"}).then(e=>{let t=new Blob([e.data],{type:e.data.type});Object(K["download"])(t,"Códigos QR"),R.a.fire({icon:"success",title:"¡Listo!",text:"Códigos QR descargados!"})}).catch(e=>{R.a.fire({icon:"error",title:"Oops...",text:"No se pudieron descargar los codigos"}),console.log(e)})}).catch(e=>{console.log(e)})},allowOutsideClick:()=>!R.a.isLoading()})},O=()=>{a.value=!0,q.get(o+"/delete-all").then(e=>{console.log(e),a.value=!1,r()}).catch(e=>{console.log(e),a.value=!1})};return{getQrs:r,codigosCreados:e,codigosSeleccionados:t,isLoading:a,isTable:n,descargarQr:i,descargarTodosLosQr:l,seleccionarCodigo:d,prepararSeleccionados:b,descargarSeleccionados:u,borrarTodo:O,emit:s}},computed:{cantidadSeleccionada(){return this.codigosSeleccionados.length},cantidadTotalCodigos(){return this.codigosCreados.length},tamosEnDev(){return!0}},mounted(){this.emitter.on("recargarTabla",()=>{this.getQrs()})},created(){this.getQrs()}};o("cbc9");const G=M()(F,[["render",x],["__scopeId","data-v-06fa94c1"]]);var H=G;const W=e=>(Object(c["m"])("data-v-612ce3b7"),e=e(),Object(c["l"])(),e),X={class:"container"},Y=W(()=>Object(c["f"])("h1",null,"Crea tus códigos",-1)),Z={class:"inputs"},ee={class:"step",id:"first"},te=W(()=>Object(c["f"])("div",{class:"step-title"},[Object(c["f"])("div",{class:"step-number"},"1"),Object(c["g"])(" Pegá la información ")],-1)),oe={class:"step",id:"second"},ce=W(()=>Object(c["f"])("div",{class:"step-title"},[Object(c["f"])("div",{class:"step-number"},"2"),Object(c["g"])(" Acá aparecen todos los códigos que se van a crear ")],-1)),ae={class:"selection"},ne={key:0,class:"list"},se={class:"stand-out"},re={class:"buttons"},ie={key:1,class:"empty-message"};function le(e,t,o,a,n,s){return Object(c["k"])(),Object(c["e"])("div",X,[Y,Object(c["f"])("div",Z,[Object(c["f"])("div",ee,[te,Object(c["u"])(Object(c["f"])("textarea",{name:"qrs-json",id:"qrs-json",cols:"10",rows:"14",class:"incrusted","onUpdate:modelValue":t[0]||(t[0]=e=>a.basicData=e)},"\r\n                ",512),[[c["s"],a.basicData]]),Object(c["g"])(" Cantidad de registros: "+Object(c["r"])(a.totalRegistros),1)]),Object(c["f"])("div",oe,[ce,Object(c["f"])("div",ae,[a.formatedData.length>0?(Object(c["k"])(),Object(c["e"])("div",ne,[Object(c["f"])("ul",se,[(Object(c["k"])(!0),Object(c["e"])(c["a"],null,Object(c["p"])(a.formatedData,(e,t)=>(Object(c["k"])(),Object(c["e"])("li",{key:t},[Object(c["f"])("span",null,Object(c["r"])(e.cliente)+" - "+Object(c["r"])(e.unidad)+" - "+Object(c["r"])(e.equipo),1)]))),128))]),Object(c["f"])("div",re,[Object(c["f"])("button",{type:"button",class:"button-green",onClick:t[1]||(t[1]=(...e)=>a.crearQrs&&a.crearQrs(...e))},"Crear y Descargar QRs ")])])):(Object(c["k"])(),Object(c["e"])("div",ie," No hay QRs para crear "))])])])])}var de={name:"Code Create",setup(){const e=Object(c["o"])(""),t=Object(c["b"])(()=>JSON.parse(e.value)),o=Object(c["b"])(()=>e.value?t.value.length:0),a=Object(c["b"])(()=>e.value?t.value:[]),n=Object(c["i"])("apiUrl"),s="",r=function(){R.a.fire({title:"Creando los códigos QR . . .",didOpen:()=>{R.a.showLoading(),q.post(n+"/create",a.value).then(e=>{e&&(this.emit.emit("recargarTabla"),this.downloadAll(e.data.response).then(e=>{if(e){let t=new Blob([e.data]);Object(K["download"])(t,"Códigos QR.zip"),R.a.fire({icon:"success",title:"¡Listo!",text:"Códigos QR descargados!"})}else R.a.fire({icon:"error",title:"Oops...",text:"No se pudieron descargar los codigos"})}).catch(e=>{console.log(e),R.a.fire({icon:"error",title:"Oops...",text:e})}))}).catch(e=>{console.log(e),R.a.fire({icon:"error",title:"Oops...",text:e})})},allowOutsideClick:()=>!R.a.isLoading()})},i=function(e){return new Promise((t,o)=>{e.length?q.post(n+"/download",e,{responseType:"blob"}).then(e=>{t(e)}).catch(e=>{console.log("Error: "+e),o(!1)}):o("Array de registros vacio")})};return{basicData:e,parsedData:t,totalRegistros:o,formatedData:a,crearQrs:r,emit:s,downloadAll:i}},created(){this.emit=this.emitter}};o("ce47");const be=M()(de,[["render",le],["__scopeId","data-v-612ce3b7"]]);var ue=be;const Oe=e=>(Object(c["m"])("data-v-13e3091e"),e=e(),Object(c["l"])(),e),je={class:"authenticate-container shadow"},fe=Oe(()=>Object(c["f"])("div",{class:"form-header"},[Object(c["f"])("h2",null,"Ingresa la clave que generaste")],-1)),pe={class:"form-body"},ge=Oe(()=>Object(c["f"])("label",{for:"key"},"Key",-1)),he=Oe(()=>Object(c["f"])("div",{class:"form-footer"},[Object(c["f"])("button",{class:"button-green shadow",type:"submit"},"Autenticar")],-1));function ve(e,t,o,a,n,s){return Object(c["k"])(),Object(c["e"])("div",je,[Object(c["f"])("form",{method:"POST",onSubmit:t[1]||(t[1]=Object(c["v"])((...e)=>s.autenticar&&s.autenticar(...e),["prevent"]))},[fe,Object(c["f"])("div",pe,[ge,Object(c["u"])(Object(c["f"])("input",{type:"key","onUpdate:modelValue":t[0]||(t[0]=e=>a.key=e)},null,512),[[c["s"],a.key]])]),he],32)])}var ke={setup(){const e=Object(c["o"])(""),t=Object(c["i"])("basePath");return{key:e,basePath:t}},methods:{autenticar:function(){let e=this.key.split(" ",2);S.a.post(this.basePath+"/verify",{token:this.key}).then(t=>{t.data.isValidated?(localStorage.setItem("inge_access_token",e[1]),this.$emit("verified")):R.a.fire({icon:"error",title:"Error en validación de token",text:t.data.message})}).catch(e=>{console.log(e),R.a.fire({icon:"error",title:"Error en validación de token",text:e.message})})}}};o("ae92");const ye=M()(ke,[["render",ve],["__scopeId","data-v-13e3091e"]]);var me=ye;function we(e){const{title:t}=e.$options;if(t)return"function"===typeof t?t.call(e):t}var Ce={created(){const e=we(this);e&&(document.title=e)}},_e={name:"App",mixins:[Ce],components:{CodesTable:H,CodeCreate:ue,Authenticator:me},title(){return"Ingeray QR System"},setup(){let e=Object(c["o"])(!1);const t=()=>{e.value=!0};return{isAuthenticated:e,setAuthenticate:t}}};o("df83");const Te=M()(_e,[["render",r]]);var xe=Te,Qe=o("1344"),Se=o("5502");const qe=Object(Se["a"])({state(){return{isAuthenticated:!1,access_token:null}},getters:{isAuthenticated(e){return e.isAuthenticated},accessToken(e){return e.access_token}},mutations:{setAccessToken(e,t){e.access_token=t.newToken}}});var Le=qe;const Pe=Object(c["c"])(xe);let Ae="https://ingeray-qr-maker.onrender.com",Re="https://ingeray-qr-maker.onrender.com/qr";Pe.provide("basePath",Ae),Pe.provide("apiUrl",Re),Pe.use(Le),Pe.config.globalProperties.emitter=Object(Qe["a"])(),Pe.mount("#app")},"69a4":function(e,t){function o(e,t){let o=window.URL.createObjectURL(e),c=document.createElement("a");c.href=o,c.setAttribute("download",t),document.body.appendChild(c),c.click(),c.remove()}e.exports={download:o}},"827d":function(e,t,o){},a6f1:function(e,t,o){"use strict";o("b80f")},ae92:function(e,t,o){"use strict";o("827d")},b80f:function(e,t,o){},cbc9:function(e,t,o){"use strict";o("41ad")},ce47:function(e,t,o){"use strict";o("540e")},df83:function(e,t,o){"use strict";o("2810")}});
//# sourceMappingURL=app.d7feab47.js.map